<div class="row">
	<div class="col-md-12">
		<!-- Default panel -->
		<div class="panel panel-default">
			<div class="panel-heading">
				{{'MENU_SECONDARY' | translate}}
			</div>
			
			<div class="panel-body">
				
				<div class="row">
					<div class="col-md-4">
						<label>{{'GPR_1_TH_SCHOOL_YEAR' | translate}}</label>
						<div ng-dropdown-multiselect="" search-filter="yearFilter" options="vm.years" selected-model="vm.filter.year" extra-settings="vm.yearSettings" translation-texts="vm.yearSettingsText"></div>
					</div>
					<div class="col-md-4">
						<label>{{'GPR_1_TH_MUNICI' | translate}}</label>
						<div ng-dropdown-multiselect="" search-filter="municipalityFilter" options="vm.municipalities" selected-model="vm.filter.municipality" extra-settings="vm.municipalitySettings" events="municipalityEvents" translation-texts="vm.municipalitySettingsText"></div>
					</div>
					<div class="col-md-4">
						<label>{{'FILTER_INSTITUTION' | translate}}</label>
						<div ng-dropdown-multiselect="" search-filter="institutionFilter" options="vm.institutionsF" selected-model="vm.filter.institution" extra-settings="vm.institutionSettings" translation-texts="vm.institutionSettingsText"></div>
					</div>
					<div class="col-md-12">
						<label>{{'FILTER_QUESTIONS' | translate}}</label>
						
						<ui-select ng-model="vm.filter.question" ng-change="vm.getData(vm.filter)" title="{{'SELECT_QUESTION' | translate}}">
						<ui-select-match placeholder="{{'SELECT_QUESTION' | translate}}">{{$select.selected.name}}</ui-select-match>
						<ui-select-choices repeat="item in vm.questions | filter: $select.search">
						<span ng-bind-html="item.name | highlight: $select.search"></span>
						</ui-select-choices>
						</ui-select>
					</div>
				</div>
				<div class="row">
					<button class="btn btn-success pull-right" ng-click="vm.getData(vm.filter);">{{'BTN_SAVE' | translate}}</button>
				</div>
				
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-md-12">
		
		<!-- Tabbed panel -->
		<div ng-init="vm.tabbed_panel_active = 1;" class="panel panel-default"><!-- Add class "collapsed" to minimize the panel -->
		<div class="panel-heading">
			<h3 class="panel-title">{{'INFO_SHOW' | translate }}</h3>
			
			<div class="panel-options">
				
				<ul class="nav nav-tabs">
					<li ng-class="{'active': vm.tabbed_panel_active == 1}">
						<a href="" ng-click="vm.tabbed_panel_active = 1">{{'GPR_TABLE' | translate}}</a>
					</li>
					<li ng-class="{'active': vm.tabbed_panel_active == 2}">
						<a href="" ng-click="vm.tabbed_panel_active = 2">{{'GPR_CHART' | translate}}</a>
					</li>
				</ul>
				
			</div>
		</div>
		
		<div class="panel-body">
			
			<div class="tab-content">
				
				<div class="tab-pane" ng-class="{'active': vm.tabbed_panel_active == 1}">

				<!-- GPR 1 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 1">
						<thead>
							<tr>
								<th class="col-md-3">{{'GPR_1_TH_SCHOOL'| translate}}</th> 
								<th >{{'GPR_1_TH_MUNICI' | translate}}</th>
								<th class="col-md-2">{{'GPR_1_TH_TYPE' | translate}}</th>
								<th>{{'GPR_1_TH_STUDENTS'| translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}}</td>
								<td>{{school.municipalityName}}</td>
								<td>{{school.type}}</td>
								<td>
									<table class="table table-bordered table-striped table-condensed table-hover">
										<thead>
											<tr>
												<th>{{'GPR_1_TH_SCHOOL_YEAR' |translate}} </th>
												<th> {{'GPR_1_TH_APPLIED' |translate}} </th>
												<th>{{'GPR_1_TH_ENROLLED' | translate}}</th>
												<th>{{'GPR_1_TH_PERCENT' | translate}}</th>
											</tr>
										</thead>
										<tbody>
											<tr  ng-repeat="year in school.years">
												<td class="text-center"> {{year.schoolYear}} </td>
												<td class="text-center" ng-show="year.schoostudentsApplied != null"> {{year.schoostudentsApplied}} </td>
												<td class="text-center" ng-show="year.schoostudentsApplied == null"> {{year.studentsEnrolled}} </td>
												<td class="text-center"> {{year.studentsEnrolled}} </td>
												<td class="text-center" ng-show="year.schoostudentsApplied != null"> {{vm.calcPercent(year.schoostudentsApplied,year.studentsEnrolled)}} 
												</td>
												<td class="text-center" ng-show="year.schoostudentsApplied == null">100</td>
										</tbody>
									</table>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 1 -->

					<!-- GPR 2 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 2">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th class="col-md-2">{{'GPR_1_TH_TYPE'| translate}}</th>
								<th>{{'STUDENTS_PER_PROGRAM' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}}</td>
								<td>{{school.type}}</td>
								<td>
									<div ng-repeat="year in school.years">
										<p class="text-center"> {{'FOR_SCHOOL_YEAR' | translate}} {{year.schoolYear}} </p>
										<table class="table table-bordered table-striped table-condensed table-hover">
											<thead>
												<tr>
													<th> {{'PROGRAM' |translate}} </th>
													<th width="90px">{{'GPR_1_TH_ENROLLED' | translate}}</th>
												</tr>
											</thead>
											<tbody>
												<tr ng-repeat="program in year.programmes">
													<td> {{program.programmeName}} </td>
													<td class="text-center"> {{program.studentsEnrolled}} </td>
												</tr>
											</tbody>
										</table>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
					<!-- END OF GPR 2 -->

					<!-- GPR 3 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 3">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th>{{'GPR_1_TH_TYPE'| translate}}</th>
								<th>{{'GPR_1_TH_STUDENTS'| translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td class="col-md-4">{{school.schoolName}} <br> <small> {{school.municipalityName}} </small></td>
								<td class="col-md-4">{{school.type}}</td>
								<td>
									<div ng-repeat="year in school.years">
										<p class="text-center"> {{'FOR_SCHOOL_YEAR' | translate}} {{year.schoolYear}} </p>
										<table class="table table-bordered table-striped table-condensed table-hover">
											<thead>
												<tr>
													<th> {{'GPR_3_TH_NATIONALITY' |translate}} </th>
													<th width="90px">{{'GPR_1_TH_ENROLLED' | translate}}</th>
												</tr>
											</thead>
											<tbody>
												<tr ng-repeat="nationality in year.nationality">
													<td> {{nationality.nationalityName}} </td>
													<td class="text-center"> {{nationality.studentsEnrolled}} </td>
												</tr>
											</tbody>
										</table>
									</div>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 3 -->

					<!-- GPR 4 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 4">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th>{{'GPR_4_STUDENTS_NATIONALITY' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}} <br> <small>{{school.type}}</small></td>
								<td>
									<div ng-repeat="year in school.years">
										<p class="text-center"> {{'FOR_SCHOOL_YEAR' | translate}} {{year.schoolYear}} </p>
										<table class="table table-bordered table-striped table-condensed table-hover">
											<thead>
												<tr>
													<th> {{'PROGRAM' |translate}} </th>
													<th> {{'GPR_3_TH_NATIONALITY' |translate}} </th>
													<th> {{'GPR_1_TH_ENROLLED' |translate}} </th>
												</tr>
											</thead>
											<tbody>
												<tr ng-repeat="program in year.programmes">
													<td>{{program.programmeName}}</td>
													<td>
														<table class="table table-striped table-condensed table-hover">
															<tbody>
																<tr ng-repeat="nationality in program.nationality">
																	<td> {{nationality.nationalityName}} </td>
																</tr>
															</tbody>
														</table>
													</td>
													<td>
														<table class="table table-striped table-condensed table-hover">
															<tbody>
																<tr ng-repeat="nationality in program.nationality">
																	<td class="text-center"> {{nationality.studentsEnrolled}} </td>
																</tr>
															</tbody>
														</table>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 4 -->

					<!-- GPR 5 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 5">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th>{{'GPR_1_TH_TYPE'| translate}}</th>
								<th>{{'GPR_5_STUDENTS_GENDER'| translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}} <br></td>
								<td>{{school.type}}</td>
								<td>
									<table class="table table-bordered table-striped table-condensed table-hover">
										<thead>
											<tr>
												<th>{{'GPR_1_TH_SCHOOL_YEAR' |translate}} </th>
												<th> {{'GPR_5_TH_FEMALE' |translate}} </th>
												<th>{{'GPR_5_TH_MALE' | translate}}</th>
											</tr>
										</thead>
										<tbody>
											<tr  ng-repeat="year in school.years">
												<td class="text-center"> {{year.schoolYear}} </td>
												<td class="text-center"> {{year.gender[0].studentsEnrolled}} </td>
												<td class="text-center"> {{year.gender[1].studentsEnrolled}} </td>
												</td>
										</tbody>
									</table>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 5 -->

					<!-- GPR 6 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 6">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th>{{'GPR_5_STUDENTS_GENDER' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}} <br> <small>{{school.type}}</small></td>
								<td>
									<div ng-repeat="year in school.years">
										<p class="text-center"> {{'FOR_SCHOOL_YEAR' | translate}} {{year.schoolYear}} </p>
										<table class="table table-bordered table-striped table-condensed table-hover">
											<thead>
												<tr>
													<th> {{'PROGRAM' |translate}} </th>
													<th> {{'GPR_5_TH_FEMALE' |translate}} </th>
													<th> {{'GPR_5_TH_MALE' |translate}} </th>
												</tr>
											</thead>
											<tbody>
												<tr ng-repeat="program in year.programmes">
													<td>{{program.programmeName}}</td>
													<td class="text-center"> {{program.gender[0].studentsEnrolled}} </td>
													<td class="text-center"> {{program.gender[1].studentsEnrolled}} </td>
												</tr>
											</tbody>
										</table>
									</div>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 6 -->

					<!-- GPR 7 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 7">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th>{{'GPR_1_TH_STUDENTS' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}}<br> <small>{{school.type}}</small></td>
								<td>
									<table class="table table-bordered table-striped table-condensed table-hover">
										<thead>
											<tr>
												<th>{{'GPR_1_TH_SCHOOL_YEAR' |translate}} </th>
												<th>{{'GPR_7_GRADUATED' |translate}}</th>
												<th>{{'GPR_7_ENROLLED' | translate}}</th>
												<th>{{'GPR_7_EMPLOYED' | translate}}</th>
												<th>{{'GPR_7_UNEMPLOYED' | translate}}</th>
												<th>{{'GPR_7_UNKNOWN' | translate}}</th>
											</tr>
										</thead>
										<tbody>
											<tr  ng-repeat="year in school.years">
												<td class="text-center"> {{year.schoolYear}} </td>
												<td class="text-center"> {{year.GraduatesNumber}} </td>
												<td class="text-center"> {{year.studentsEnrolled}} </td>
												<td class="text-center"> {{year.EmployedNumber}} </td>
												<td class="text-center"> {{year.UnemployedNumber}} </td>
												<td class="text-center"> {{year.UnknownStatusNumber}} </td>
										</tbody>
									</table>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 7 -->

					<!-- GPR 8 -->
					<table ng-table="gpr2Table" class="table table-bordered table-striped table-condensed table-hover" ng-show="vm.hasData && vm.filter.question.gpr == 8">
						<thead>
							<tr>
								<th>{{'GPR_1_TH_SCHOOL'| translate}}</th>
								<th>{{'GPR_1_TH_STUDENTS' | translate}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="school in vm.tableData">
								<td>{{school.schoolName}} <br> <small>{{school.type}}</small></td>
								<td>
									<div ng-repeat="year in school.years">
										<p class="text-center"> {{'FOR_SCHOOL_YEAR' | translate}} {{year.schoolYear}} </p>
										<table class="table table-bordered table-striped table-condensed table-hover">
										<thead>
											<tr>
												<th class="col-md-3">{{'PROGRAM' |translate}} </th>
												<th>{{'GPR_7_GRADUATED' |translate}}</th>
												<th>{{'GPR_7_ENROLLED' | translate}}</th>
												<th>{{'GPR_7_EMPLOYED' | translate}}</th>
												<th>{{'GPR_7_UNEMPLOYED' | translate}}</th>
												<th>{{'GPR_7_UNKNOWN' | translate}}</th>
											</tr>
										</thead>
										<tbody>
											<tr  ng-repeat="program in year.programmes">
												<td> {{program.programmeName}} </td>
												<td class="text-center"> {{program.GraduatesNumber}} </td>
												<td class="text-center"> {{program.studentsEnrolled}} </td>
												<td class="text-center"> {{program.EmployedNumber}} </td>
												<td class="text-center"> {{program.UnemployedNumber}} </td>
												<td class="text-center"> {{program.UnknownStatusNumber}} </td>
										</tbody>
									</table>
									</div>
								</td>
							</tr>
						</tbody>
					</table>

					<!-- END OF GPR 8 -->


					<p ng-show="!vm.hasData && !vm.isLoading">{{'NO_INFO' | translate}}</p>
					<spinner ng-show="vm.isLoading"></spinner>
				</div>
				
				<div class="tab-pane" ng-class="{'active': vm.tabbed_panel_active == 2}">
					<div class="col-md-4">
						<label>{{'GPR_1_TH_SCHOOL'| translate}}</label>
						<ui-select ng-model="vm.gpr2.selectedSchool" ng-change="vm.chartGpr2()">
						<ui-select-match>
						<span ng-bind="$select.selected.name"></span>
						</ui-select-match>
						<ui-select-choices repeat="item in (vm.filter.institution | filter: $select.search)">
						<span ng-bind="item.name"></span>
						</ui-select-choices>
						</ui-select>
					</div>
					<div class="col-md-8">
						<canvas id="line" class="chart chart-line" chart-data="vm.gpr2.data"
						chart-labels="vm.gpr2.labels" chart-legend="true" chart-series="vm.gpr2.series" >
						</canvas>
					</div>
				</div>
				
			</div>
		</div>
	</div>
	
</div>
</div>